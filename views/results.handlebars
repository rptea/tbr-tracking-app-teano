{{!-- views/results.handlebars --}}
<h1>Search results for "{{query}}"</h1>

<p>
    <a href="/books/search">New search</a> |
    <a href="/books/saved">My saved books</a>
</p>

<div class="results-controls">
    <span>Results per page:</span>
    {{#each pageSizes}}
        {{#if isSelected}}
            <strong>{{value}}</strong>
        {{else}}
            <a href="/books/search?q={{../query}}&page=1&limit={{value}}">{{value}}</a>
        {{/if}}
    {{/each}}
</div>

{{#if results.length}}
    <ul class="book-results">
        {{#each results}}
            <li class="book-card">
                <div class="book-card__image">
                    <img src="{{thumbnail_url}}" alt="Cover for {{title}}">
                </div>

                <div class="book-card__content">
                    <h2>{{title}}</h2>
                    <p class="book-card__author">{{author}}</p>

                    <form action="/books/save" method="POST">
                        <input type="hidden" name="api_source" value="{{api_source}}">
                        <input type="hidden" name="api_id" value="{{api_id}}">
                        <input type="hidden" name="title" value="{{title}}">
                        <input type="hidden" name="thumbnail_url" value="{{thumbnail_url}}">
                        <button type="submit">Save to my list</button>
                    </form>
                </div>
            </li>
        {{/each}}
    </ul>

    <div class="pagination">
        {{#if hasPrev}}
            <a href="/books/search?q={{query}}&page={{prevPage}}&limit={{limit}}">Previous</a>
        {{/if}}

        <span>Page {{currentPage}} of {{totalPages}}</span>

        {{#if hasNext}}
            <a href="/books/search?q={{query}}&page={{nextPage}}&limit={{limit}}">Next</a>
        {{/if}}
    </div>
{{else}} 
    <p>No results found. Try a different search term.</p>
{{/if}}